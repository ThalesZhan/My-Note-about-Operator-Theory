\chapter{Normal Operators and Abelian Von Neumann Algebras}

For a normal operator $N$, it can generate an abelian norm closed $\st{C}$-subalgebra of $\oper$, which is isometrically $*$-isomorphic to $C(\sigma(N))$. But the norm closed $\st{C}$-subalgebra may be too "small" to get more interesting results. Therefore, we want to see the $WOT$-closed $\st{C}$-subalgebra $\st{W}(N)$ generated by a normal operator $N$. This extension can be naturally done by the following processes. Firstly, we will extend $C(X)$ to $B(X,\Omega)$, where $B(X,\Omega)$ denotes all $\Omega$-measurable functions on $X$, and find the map from $B(X,\Omega)$ to $\oper$. Then using this method, we can extend the Continuous Functional Calculus to the Borel Functional Calculus. To illuminate the structure of $\st{W}(N)$, we need more properties of $WOT$-closed $\st{C}$-subalgebras, i.e. von Neumann algebras, and abelian von Neumann algebras. After that, we can build the isomorphism from $\st{W}(N)$ to $\lfs{\infty}(\sigma(N))$. Finally, by the above methods, we can get the multiplicity theory of normal operators.

\section{Spectral Theorem}

\subsection{Spectral Measures}

Firstly, we want to construct the map from $B(X,\Omega)$ to $\oper$. Thus we need to define the operator-valued measure.

\begin{defn}
	If $X$ is a set and $\Omega$ is a $\sigma$-algebra of subsets of $X$, and $\Hs$ is a Hilbert space, then a spectral measure for $(X,\Omega,\Hs)$ is a function $E \colon \Omega \sto \oper$ satisfying the following properties.
	\begin{enumerate}[label=\arabic*)]
		\item $E(\Delta)$ is a projection for any $\Delta \in \Omega$.
		\item $E(\varnothing) = 0$ and $E(X) = 1$.
		\item $E(\Delta_1\cap\Delta_1)=E(\Delta_1)E(\Delta_2)$ for any $\Delta_1, \Delta_2 \in \Omega$.
		\item If $\{\Delta_n\}_{n=1}^{\infty}$ is a sequence of pairwise disjoint sets in $\Omega$,
		\begin{equation*}
			E(\bigcup_{n=1}^{\infty}\Delta_n) = \sum_{n=1}^{\infty} E(\Delta_n)
		\end{equation*}
	\end{enumerate}
\end{defn}
\begin{rem}
	In $4)$, this convergence is about $SOT$, and since $E(\Delta)$ is a projection, it is also about $WOT$.
\end{rem}

Then we can see the relation between the spectral measure and the complex measure.
\begin{prop}
	If $E$ is a spectral measure for $(X,\Omega,\Hs)$ and $g,h \in \Hs$, then
	\begin{equation*}
		E_{gh}(\Delta) = \langle E(\Delta)g, h \rangle
	\end{equation*}
	is a complex measure of $(X,\Omega)$. Moreover, $\norm{E_{gh}} \leqslant \norm{g}\norm{h}$.
\end{prop}
\begin{proof}
	$\mu=E_{gh}(\Delta)$ is a complex measure by definition.
	\begin{equation*}
		\abs{\mu}(\Delta) = \abs{\langle E(\Delta)g, h \rangle} \leqslant \norm{E(\Delta)g}\norm{h} \leqslant \norm{g}\norm{h} \qedhere
	\end{equation*}
\end{proof}

Using the spectral measure, we can define the operator-valued integral.

\begin{thm}
	If $E$ is a spectral measure for $(X,\Omega,\Hs)$ and $\phi \colon X \sto \C$ is a bounded $\Omega$-measurable function, then there is a unique operator $T \in \oper$ s.t. for any $\varepsilon > 0$, there is a $\Omega$-partition $\{\Delta_i\}_{i=1}^{n}$ of $X$ with
	\begin{equation*}
		 \sup{\{\abs{\phi(x)-\phi(y)} \colon x, y \in \Delta_k\}}
	\end{equation*}
	for $1 \leqslant k \leqslant n$ s.t. for any $x_k \in \Delta_k$
	\begin{equation*}
		\norm{T-\sum_{k=1}^{n}\phi(k)E(\Delta_k)} < \varepsilon
	\end{equation*}
\end{thm}
\begin{proof}
	Define
	\begin{center}
		\begin{tabular}{l c c l}
			$B \colon$ & $\Hs \times \Hs$ & $\longrightarrow$ & $\C$ \\
			~ & $(g,h)$ & $\longmapsto$ & $\int \phi dE_{gh}$
		\end{tabular}
	\end{center}
	Since $\norm{B(g,h)} \leqslant \norm{\phi}_{\infty} \norm{g} \norm{h}$, $B$ is a bounded sesquilinear form. Then by the Riesz Theorem, there is a $B \in \oper$ s.t. $B(g,h) = \langle Tg,h \rangle$ for all $g,h \in \Hs$ and $\norm{T} \leqslant \norm{\phi}_{\infty}$. Then for and $g,h \in \Hs$ and $x_k \in \Delta_k$ with the giving partition
	\begin{eqnarray*}
		\abs{\langle Tg,h \rangle - \sum_{k=1}^{n}\phi(x_k)\langle E(\Delta_k)g, h \rangle} &=& \abs{\sum_{k=1}^{n} \int_{\Delta_k} (\phi(x)-\phi(x_k))dE_{gh}(x)} \\
		&\leqslant& \sum_{k=1}^{n} \int_{\Delta_k} \abs{\phi(x)-\phi(x_k)} d\abs{E_{gh}}(x) \\
		&\leqslant& \varepsilon \int d\abs{E_{gh}}(x) \leqslant \varepsilon \norm{g}\norm{h}
	\end{eqnarray*}
	Therefore, by the Riezs Theorem, 
	\begin{equation*}
		\norm{T-\sum_{k=1}^{n}\phi(k)E(\Delta_k)} < \varepsilon  \qedhere
	\end{equation*}
\end{proof}
\begin{rem}
	We define $T = \int \phi dE$, and $\langle Tg,h \rangle = \int \phi dE_{gh}$.
\end{rem}

We have one more property on $B(X)$ for a compact space $X$. Let $B(X)$ denote all bounded Borel measurable functions on $X$ and $M(X)$ be all Borel measures.

\begin{lem}
	If $X$ is a compact space and $\phi \in B(X)$, then there is a net $\{u_i\} \subset C(X)$ with $\norm{u_i}_{\infty} \leqslant \norm{\phi}$ s.t. $\int u_i d\mu \sto \int \phi d\mu$ for any $\mu$ in $M(X)$.
\end{lem}
\begin{proof}
	$C(X)^{*} = M(X)$ and $C(X) \subset C(X)^{**} = \st{M(X)}$.  Therefore, the unit ball in $C(X)$ is $wk$-dense in the unit ball in $\st{M(X)}$ (by using Hahn-Banach Theorem). Identifying $B(X)$ be the subspace of $\st{M(X)}$, we have this lemma.
\end{proof}
\begin{rem}
	In fact, $C(X)$ is norm closed in $C(X)^{**} = \st{M(X)}$ like that the $\st{C}$-algebra is norm closed in $\oper$. But by above lemma, we see in $\st{M(X)}$
	\begin{equation*}
		\clo{C(X)}^{wk} = B(X)
	\end{equation*}
	Thus we may apply this to extending $\st{C}$-algebras.
\end{rem}

$B(X,\Omega)$ with the supremum norm and complex conjugate can become a $\st{C}$-algebra. Then by above theorem, we can provide the map from $B(X,\Omega)$ to operator algebras.

\begin{prop}
	If $E$ is a spectral measure for $(X,\Omega,\Hs)$, then
	\begin{center}
		\begin{tabular}{l c c l}
			$\rho \colon$ & $B(X,\Omega)$ & $\longrightarrow$ & $\oper$ \\
			~ & $\phi$ & $\longmapsto$ & $\int \phi dE$
		\end{tabular}
	\end{center}
	is a representation of $B(X,\Omega)$.
\end{prop}
\begin{proof}
	Firstly, we need check that $\rho$ preserves the involution. For $g,h \in \Hs$,
	\begin{equation*}
		E_{gh}(\Delta) = \langle E(\Delta)g, h \rangle = \langle g, E(\Delta)h \rangle = \clo{\langle E(\Delta)h, g \rangle} = \clo{E_{hg}(\Delta)}
	\end{equation*}
	Therefore, for any $g,h \in \Hs$
	\begin{eqnarray*}
		\langle \st{(\int \phi dE)}g,h \rangle &=& \langle g, (\int \phi dE)h \rangle \\
		&=& \clo{\langle (\int \phi dE)h, g \rangle} = \clo{\int \phi dE_{hg}} \\
		&=& \int \st{\phi} d \clo{E_{hg}} = \int \st{\phi} dE_{gh} \\ 
		&=& \langle (\int \st{\phi} dE)g,h \rangle
	\end{eqnarray*}
	\item Also, $\rho$ must be multiplicative. Fix $\phi,\psi \in B(X)$ and $\varepsilon >0$, let $\{\Delta_i\}_{i=1}^{n}$ be the $\Omega$-partition of $X$ s.t. the oscillations of $\phi,\psi,\phi\psi$ on each $\Delta_i$ are less than $\varepsilon$.
	By the fact $E(\Delta_i)E(\Delta_j) = 0$ for $i \neq j$, 
	\begin{eqnarray*}
		\lefteqn{\norm{\int \phi\psi dE - (\int \phi dE)(\int \psi dE)}} \\
		&\leqslant& \varepsilon+ \norm{\sum_{k=1}^{n}\phi(x_k)\psi(x_k)E(\Delta_k) - (\sum_{i=1}^{n}\phi(x_i)E(\Delta_i))(\sum_{j=1}^{n}\psi(x_j)E(\Delta_j))} \\
		&& \negmedspace{} + \norm{(\sum_{i=1}^{n}\phi(x_i)E(\Delta_i))(\sum_{j=1}^{n}\psi(x_j)E(\Delta_j))-(\int \phi dE)(\int \psi dE)} \\
		&\leqslant& \varepsilon + \norm{(\sum_{i=1}^{n}\phi(x_i)E(\Delta_i))(\sum_{j=1}^{n}\psi(x_j)E(\Delta_j)-\int \psi dE)} \\
		&& \negmedspace{} + \norm{(\sum_{i=1}^{n}\phi(x_i)E(\Delta_i)-\int \phi dE)(\sum_{j=1}^{n}\psi(x_j)E(\Delta_j))} \\
		&\leqslant& \varepsilon(1+\norm{\phi}_{\infty}+\norm{\psi}_{\infty})
	\end{eqnarray*} 
	Then $\rho$ is indeed multiplicative.
\end{proof}

We have already there is a map from $C(X)$ to $\oper$, then by combining this proposition and above lemma, if the map is $wk$-continuous on $C(X)$, we can extend it from $M(X)$ to $\oper$. 

\begin{thm}
	If $X$ is a compact space and $\rho \colon C(X) \sto \oper$ is a representation, then there is a unique spectral measure $E$ defined on the Borel sets of $X$ s.t. $\rho$ can be expressed as 
	\begin{equation*}
		\rho(\phi) = \int \phi dE ~~\forall~\phi \in C(X)
	\end{equation*}
	Moreover, $T \in \oper$ commutes with $\rho(\phi)$ for any $\phi \in C(X)$ if and only if $T$ commutes with $E(\Delta)$ for any Borel set $\Delta$.
\end{thm}
\begin{proof}
	Constructing $\tilde{\rho}$ from $\rho$: \\
	For any $g,h \in \Hs$, the map $u \sto \langle \rho(u)g,h \rangle$ from $C(X)$ to $\oper$ is bounded with $\norm{g}\norm{h}$. Therefore, by Riesz Theorem, there exists a unique $\mu_{gh} \in M(X)$ with $\norm{\mu_{gh}} \leqslant \norm{g}\norm{h}$
	\begin{equation*}
		\langle \rho(u)g,h \rangle = \int u d\mu_{gh},~~\forall~u \in C(X)
	\end{equation*}
	For any $\phi \in B(X)$, $(g,h) \sto \int \phi d\mu_{gh}$ is a bounded sesquilinear on $\Hs \times \Hs$. Therefore, there exsits a unique $T \in \oper$, s.t.
	\begin{equation*}
		\int \phi d\mu_{gh} = \langle Tg,h \rangle
	\end{equation*}
	Then we define $\tilde{\rho}(\phi) = T$ and it is well-defined. Clearly, $\tilde{\rho}(u) = \rho(u)$ for any $u$ in $C(X)$.
	\item Check: $\tilde{\rho} \colon B(X) \sto \oper$ is a representation \\
	By the definiation, $\tilde{\rho}$ is clearly linear and preserves the involution, thus we just need to prove the multiplication. Let $\phi$ and $\psi$ in $B(X)$. There is a sequence $\{u_i\} \subset C(X)$ s.t. $u_i \sto \phi$ in $wk$-topology. Then since $\int u_i\psi d\mu \sto \int \phi\psi$ for any $\mu \in M(X)$,  $\tilde{\rho(u_i\psi)} \sto \rho(\phi\psi)$ in $WOT$. For any $\psi \in C(X)$,
	\begin{equation*}
		\tilde{\rho}(\phi\psi) = \lim \tilde{\rho}(u_i\psi) = \lim \rho(u_i)\rho(\psi) = \tilde{\rho}(\phi)\rho(\psi)
	\end{equation*}
	Therefore, if $\phi,\psi \in B(X)$, $\tilde{\rho}(\phi\psi) = \tilde{\rho}(\phi)\tilde{\rho}(\psi)$.
	\item Constructing the spectral measure: \\
	Let $E(\Delta) = \rho(\chi_{\Delta}(x))$ for all Borel set $\Delta$. Clearly, $E(\Delta)$ is a projection for any $\Delta$. For disjoint Borel sets $\Delta_1, \Delta_2$,
	\begin{equation*}
		E(\Delta_1 \cap \Delta_2) = \tilde{\rho}(\chi_{\Delta_1 \cap \Delta_2}) = \tilde{\rho}(\chi(\Delta_1)\chi(\Delta_2)) =\tilde{\rho}(\chi(\Delta_1)) = E(\Delta_1)E(\Delta_2)
	\end{equation*}
	Let $\{\Delta_n\}_{n=1}^{\infty}$ be disjoint Borel sets and $\Delta = \cup_{n=1}^{\infty}\Delta_n$ and $\Lambda_n = \cup_{k=n+1}^{\infty}\Delta_k$. By the fact that $E$ is finitely additive, for any $h \in \Hs$
	\begin{eqnarray*}
	\norm{E(\Delta)h-\sum_{k=1}^{n}E(\Delta_k)h} &=& \langle E(\Lambda_n)h, E(\Lambda_n)h \rangle \\
	&=& \langle E(\Lambda_n)h, h \rangle = \langle \tilde{\rho}(\Lambda_n)h, h \rangle \\
	&=& \int \chi_{\Lambda_n} d\mu_{hh} \\
	&\leqslant& \mu_{hh}(\Lambda_n) \sto 0
	\end{eqnarray*}
	Then by above theorem, with respect to this spectral measure $E$, for any $\phi \in B(X)$,
	\begin{equation*}
		\tilde{\rho}(\phi) = \int \phi dE
	\end{equation*}
	In particular, for $u \in C(X)$, it is also true.
	\item Check: The uniqueness of $E$.
	If there is another $E^{'}$ satisfying above conditions, then for any $g,h \in \Hs$
	\begin{equation*}
		\int \phi dE^{'}_{gh} = \int \phi dE_{gh}
	\end{equation*}
	Therefore, $E^{'} = E$.
	\item Finally, if $T$ commutes with $\tilde{\rho}(\phi)$ for any $\phi \in C(X)$, we can use the $WOT$-convergence to get that $T$ commutes with $\tilde{\rho}(\phi)$ for any $\phi \in B(X)$. Therefore, clearly $T$ commutes with $E(\Delta)$ for any Borel set $\Delta$. Conversely, if $T$ commutes with $E(\Delta)$ for any Borel set $\Delta$, 
	\begin{equation*}
		\langle E(\Delta)Tg,h \rangle = \langle E(\Delta)g,\st{T}h \rangle
	\end{equation*}
	i.e. $\mu_{Tg,h} = \mu_{g, \st{T}h}$. Thus for any $\phi \in B(X)$,
	\begin{equation*}
		\int \phi d\mu_{Tg,h} = \int \phi d\mu_{g,\st{T}h},~\text{i.e.}~\langle \phi Tg,h \rangle = \langle \phi g,\st{T}h \rangle
	\end{equation*}
	Then $\langle \tilde{\rho}(\phi) Tg,h \rangle = \langle T \tilde{\rho}(\phi) g,h \rangle$ for any $g,h \in \Hs$.
\end{proof}
\begin{rem}
	Thus, we extend $\rho \colon C(X) \sto \oper$ to $\tilde{\rho}$ defined on $B(X)$ Moreover, by above proof we know the $*$-homomorphism
	\begin{center}
		\begin{tabular}{l c c l}
			$\tilde{\rho} \colon$ & $(B(X),wk)$ & $\longrightarrow$ & $(\oper,WOT)$ \\
			~ & $\phi$ & $\longmapsto$ & $\int \phi dE$
		\end{tabular}
	\end{center}
	is continuous and therefore $\tilde{\rho}(B(X))$ is $WOT$-closed in $\oper$.
\end{rem}

\subsection{Spectral Theorem for Normal Operators}

Now we can apply above theorem to a normal operator and extend the Continuous Functional Calculus to the Borel Functional Calculus. Moreover, it will promote us to consider the structure of the $WOT$-closed operator algebra generated by a normal operator.

\begin{thm}
	If $N$ is a normal operator, then there is a unique spectral measure $E$ s.t. 
	\begin{center}
		\begin{tabular}{l c c l}
			$\rho \colon$ & $B(\sigma(N))$ & $\longrightarrow$ & $\oper$ \\
			~ & $\phi$ & $\longmapsto$ & $\phi(N) = \int \phi dE$
		\end{tabular}
	\end{center}
	and $\rho|_{C(\sigma(N))}$ is the Continuous Functional Calculus. Moreover,
	\begin{enumerate}[label=\arabic*)]
		\item $\tilde{\rho} \colon (B(X),wk) \sto (\oper,WOT)$ is continuous.
		\item if $G$ is nonempty and relatively open subset in $\sigma(N)$, $E(G) \neq 0$.
		\item if $T \in \oper$, then $TN=NT$ and $T\st{N}=\st{N}T$ if and only if T commutes with $E(\Delta)$ for any Borel set $\Delta$.
	\end{enumerate}
\end{thm}
\begin{proof}
	By above theorem, this $\rho$ is in fact the extension of the Continuous Functional Calculus. And $\rho$ is $wk-WOT$ continuous. 
	\item For $2)$, it is because that $\rho|_{C(\sigma(N))}$ is an isometry. If $\chi_{G} > 0$, then there is a continuous function s.t. $0<f<\chi_{G}$. Therefore, $0 < \rho(f) \leqslant \rho(\chi_{G})$.
	\item Since the condition that $T$ commutes with $N$ and $\st{N}$ is equivalent to that $T$ commutes with $\phi(N)$ for any $\phi \in C(\sigma(N))$, by above theorem, $3)$ holds.
\end{proof}
\begin{rem}
	Now, for a normal operator $N$, we have
	\begin{equation*}
		N = \int_{\sigma(N)} z dE = z(N) = \int_{\Gamma} (z-N)^{-1} dz
	\end{equation*}
\end{rem}

There are some properties of the spectral measure of normal operator $N$.

\begin{prop} \label{prop11}
	Let $N$ be a normal operator with the spectral measure $E$.
	\begin{enumerate}[label=\arabic*)]
		\item $\lambda \in \sigma_p(N) \Leftrightarrow E(\{\lambda\}) \neq 0$.
		\item If $\lambda \in \sigma_p(N)$, then $\ran{E(\{\lambda\})}=\ker{(N-\lambda)}$.
		\item If $\lambda \in \sigma_p(N)$ and $\phi \in B(\sigma(N))$, then for any $h \in \Hs$,
		\begin{equation*}
			\phi(N)h = \phi(\lambda)h
		\end{equation*}
	\end{enumerate}
\end{prop}
\begin{proof}
	For $1)$, if $\lambda \in \sigma(N)$, then there is a nonzero vector $h \in \Hs$ s.t. $(N-\lambda)h=0$.
	\begin{equation*}
		0 = \norm{(N-\lambda)h}^2=\int_{\sigma(N)} \abs{z-\lambda}^2 d E_{hh} = \int_{\sigma(N) \backslash \{\lambda\}} \abs{z-\lambda}^2 d E_{hh}
	\end{equation*}
	Then since $E_{hh}$ is a positive measure,
	\begin{equation*}
		\int_{\sigma(N) \backslash \{\lambda\}} d E_{hh} = \norm{E(\sigma(N) \backslash \{\lambda\})h}^2 = 0
	\end{equation*} 
	And since $E(\sigma(N))=1$, 
	\begin{equation*}
		E(\{\lambda\})h = h,~\text{i.e } E(\{\lambda\}) \neq 0
	\end{equation*}
	Conversely, if $E(\{\lambda\}) \neq 0$, then for nonzero $h \in \ran{E(\{\lambda\})}$, $E(\{\lambda\})h = h$,
	\begin{eqnarray*}
		\int_{\sigma(N)} \abs{z-\lambda}^2 d \langle E(z)h,h \rangle &=&  \int_{\sigma(N)} \abs{z-\lambda}^2 d \langle E(z)E(\{\lambda\})h,h \rangle \\
		&=& \int_{\{\lambda\}} \abs{z-\lambda}^2 d \langle E(z)h,h \rangle =0
	\end{eqnarray*}
	That means
	\begin{equation*}
		\norm{(N-\lambda)h}^2 = \int_{\sigma(N)} \abs{z-\lambda}^2 d \langle E(z)h,h \rangle = 0
	\end{equation*}
	Then $h \in \ker{(T-\lambda)}$, i.e. $\lambda \in \sigma_p(N)$. \\
	$2)$ and $3)$ can be obtained directly by above proof.
\end{proof}
\begin{rem}
	This means that if $\lambda$ is an isolated point in $\sigma(N)$, then $\lambda \in \sigma_P(N)$.
\end{rem}

Now, we can extend the \textbf{Example} \ref{exam2} in the subsection \textbf{2.2.2}.

\begin{exam} \label{exam3}
	Let $\mu$ be a compactly supported, regular Borel measure on $\C$ and ($X,\Omega,\mu$) be the measure space. For each $\phi \in \lfs{\infty}(\mu)$, we define the map
	\begin{center}
		\begin{tabular}{l c c l}
			$M_{\phi} \colon$ & $\lfs{2}(\mu)$ & $\longrightarrow$ & $\lfs{2}(\mu)$ \\
			~ & $f(z)$ & $\longmapsto$ & $\phi(z)f(z)$
		\end{tabular} 
	\end{center}
	\begin{enumerate}[label=\arabic*)]
		\item the spectral measure for $M_{\phi}$ is $M_{\chi_{\phi^{-1}(\Delta)}}$.
		\item If $\psi \in B(\sigma(M_{\phi}))$, then $\psi(M_{\phi}) = M_{\psi \circ \phi}$.
	\end{enumerate}
\end{exam}

\section{Abelian Von Neumann Algebras}

In above section, we built the representation $\rho$ from $B(X)$ to $\oper$, and more over, $\rho$ is $wk-WOT$ continuous. Thus we want to prove $\rho(B(X))$ is indeed a $WOT$-closed $\st{C}$-subalgebra of $\oper$. If $X = \sigma(N)$, $\rho(B(\sigma(N)))$ is the $WOT$-closed $\st{C}$-subalgebra generated by $N$, denoted by $\st{W}(N)$. We will provide more rigorous proof of this statement. After that, we will make the structure of $\st{W}(N)$ more explicit. But before doing these, we some properties of $WOT$-closed subalgebra.

\subsection{Double Commutant Theorem}

\begin{defn}
	A von Neumann algebra is a weakly (or strongly) closed $\st{C}$-subalgebra of $\oper$ that contains the identity.
\end{defn}

\begin{defn}
	If $\mathcal{S} \subset \oper$ is a subset, then the commutant of $\mathcal{S}$, denoted by $\mathcal{S}^{'}$,
	\begin{equation*}
		\mathcal{S}^{'} = \{~ T\in \oper \colon TS=ST~\forall~S \in \mathcal{S} ~\}
	\end{equation*}
\end{defn}

There are some easy properties if the commutant.
\begin{prop}
	Let $\mathcal{S}$ be a subset of $\oper$.
	\begin{enumerate}[label=\arabic*)]
		\item $\mathcal{S}^{'}$ is a von Neumann algebra.
		\item If $A = \oplus_{i=1}^{n} A_i$ acts on $\Hs^{(n)}$ and $T=[T_{ij}] \in \fml{B}(\Hs^{(n)})$, then $T \in \{A\}^{'}$ if and only if $T_{ij}A_j=A_iT_{ij}$ for all $0 \leqslant i,j \leqslant n$.
		\item $[\mathcal{S}^{(n)}]^{''} = [\mathcal{S}^{''}]^{(n)}$.
	\end{enumerate}
\end{prop}

\begin{defn}
	Let $\mathcal{S}$ be a linear manifold of $\oper$.
	\begin{equation*}
		\Lat{\mathcal{S}} =\{~\M \colon \M \text{ is a invariant closed subspace for } S,~\forall S \in \mathcal{S}~\}
	\end{equation*}
\end{defn}

\begin{prop}
	If $\A$ is a $\st{C}$-subalgebra of $\oper$ containing the identity, then
	\begin{equation*}
		\clo{A}^{SOT} = \{~T \in \oper \colon \Lat{\A^n} \subset \Lat{T^n} ~\forall~ n \in \N~\}
	\end{equation*}
\end{prop}
\begin{proof}
	Assume $T \in \clo{A}^{SOT}$, there exist $T_k \in \A$ s.t. $T_kh \sto Th$ for all $h \in \Hs$. If $\M \in \Lat{\A^{(n)}}$, $T_{k}^{(n)}(\M) \subset \M$. Since $\M$ is closed, $T^{(n)}(\M) \subset \M$. \\
	Conversely, let $T$ satisfy the condition. Fix $h_1,\cdots,h_n \in \Hs$ and $\varepsilon > 0$. It suffices to show that there exists $A \in \A$ s.t. $\norm{(T-A)h_k} < \varepsilon$ for $1 \leqslant k \leqslant n$. \\
	Let $\M = \clo{\spn{\{(Ah_1,\cdots,Ah_n) \colon A \in \A\}}}$. Since $1 \in \A$, $(h_1,\cdots,h_n) \in \M$. Clearly, $\M \in \Lat{\A^{(n)}}$. Therefore $\M \in \Lat{T^{(n)}}$, i.e. $T^{(n)}(\M) \subset \M$
	\begin{equation*}
		T^{(n)}(h_1,\cdots,h_n) = (Th_1,\cdots,Th_n) \in \M
	\end{equation*}
	Thus, clearly for any given $\varepsilon > 0$, there exists $A \in \A$ s.t. 
	\begin{equation*}
		\norm{(Ah_1,\cdots,Ah_n)-(Th_1,\cdots,Th_n)} < \varepsilon
	\end{equation*}
	That means,
	\begin{equation*}
		\sum_{k=1}^{n} \norm{(A-T)h_k}^2 < \varepsilon^2
	\end{equation*}
	Therefore, $\norm{(T-A)h_k} < \varepsilon$ for $1 \leqslant k \leqslant n$.
\end{proof}

\begin{thm}[Double Commutant Theorem]
	If $\A$ is a $\st{C}$-subalgebra of $\oper$ containing the identity, then
	\begin{equation*}
		\clo{\A}^{SOT} = \clo{\A}^{WOT} = \A^{''}
	\end{equation*}
\end{thm}
\begin{proof}
	Firslty, by above proposition, $\A^{''}$ is $SOT$-closed and clearly $\A \subset \A^{''}$. Therefore, it is sufficient to show that $\A^{''} \subset \clo{\A}^{SOT}$. Let $T \in \A^{''}$. Then, by above proposition, we just to check that $\Lat{\A^{(n)}} \subset \Lat{T^{(n)}}$. \\
	Let $\M \in \Lat{\A^{(n)}}$. Thus, $\M$ reduces $\A^{(n)}$. That means the projection $P$ from $\Hs^{(n)}$ to $\M$ satisfies $P\A^{(n)} = \A^{(n)}P$, i.e. $P \in \{\A^{(n)}\}^{'}$. Since $T \in \{\A\}^{''}$, and by above proposition $T^{(n)} \in \{\A^{(n)}\}^{''}$, $PT^{(n)} = T^{(n)}P$. That means $\M \in \Lat{T^{(n)}}$
\end{proof}
\begin{rem}
	Therefore, if $\A$ is a von Neumann algebra, $\A = \A^{''}$. It supports the statement that the algebraic structure in a $\st{C}$-algebra can completely determine the topological structure.
\end{rem}

\subsection{Abelian Von Neumann Algebras}

\begin{prop}
	\begin{enumerate}[label=\arabic*)]
		\item If $\{\A_i\}_{i \in I}$ is a collection of von Neumann algebras, then $\cap_{i \in I} \A_i$ is a von Neumann algebra.
		\item If $\A$ is von Neumann algebra, then the center of $\A$, $Z_{\A} = \A \cap \A^{'}$ is a von Neumann algebra.
	\end{enumerate}
\end{prop}

We said that the norm closed $\st{C}$-subalgebras of $\oper$ not containing enough interesting elements. Now, we can see what are these "interesting elements" the $WOT$-closed $\st{C}$-subalgebras have.

\begin{thm}
	Let $\A$ be a von Neumann algebra, then $\A$ is the norm closed linear span of the projections in $\A$.
\end{thm}
\begin{proof}
	Since $\A$ is the linear span of $\Rea{\A}$, we just need to show $\Rea{\A}$ is the norm closed linear span of the projections in $\A$.\\
	Let $A \in \Rea{\A}$ with the spectral measure $E$. $E$ is defined on $\sigma(A)$. If $[a,b] \subset \sigma(A)$, then there exists a sequence $\{u_n(t)\}$ in $C(\sigma(A))$ s.t.
	\begin{equation*}
		u_n(t) = 1 \text{ for } a \leqslant t \leqslant b-n^{-1} \text{ and } u_n(t) = 0 \text{ for other} t
	\end{equation*}
	Then $u_n(t) \sto \chi_{[a,b)}(t)$. If $h \in \Hs$,
	\begin{equation*}
		\norm{(u_n(A)-E[a,b))h}^2 = \int_{\sigma(A)} \abs{u_n(t)-\chi_{[a,b)}(t)}^2 dE_{hh}(t)
	\end{equation*}
	Therefore, $u_n(A) \sto E[a,b)$ in $SOT$. And since $u_n(A) \in \A$ and $\A$ is $SOT$-closed, $E[a,b)$ is in $\A$. Thus, for any Borel subset $\Omega$ of $\sigma(A)$, $E(\Omega) \in \A$. Then $A = \int_{\sigma(A)} t dE$ is the norm closed of linear span of all $E(\Omega)$
\end{proof}
\begin{rem}
	In fact, for any normal operator $N$ in a von Neumann algebra $\A$ with the spectral measure $E$ and for any $\phi \in B(\sigma(N))$, $\phi(N)$ is in $\A$. It is because that $\clo{C(\sigma(N))}^{WOT} = B(\sigma(N))$, and the map from $B(\sigma(N))$ to $\oper$ is $wk-WOT$ continuous. That means $\phi(N)$ can be approximated by a sequence in $\A$ with respect to the $WOT$, thus $\phi(N)$ is in $\A$. In particular, for any Borel subset $\Omega$ of $\sigma(N)$, the projection $E(\Omega) \in \A$.
\end{rem}

So, these interesting elements are projections. We say the von Neumann algebra have enough projections wich can generate the von Neumann algebra. Projections play an important role in a von Neumann algebra. We will classify von Neumann algebras by classifying the containing projections.

\begin{prop}
	Let $\A$ be a von Neumann algebra and $A \in \A$.
	\begin{enumerate}[label=\arabic*)]
		\item If $E$ and $F$ are the projections onto $\clo{\ran{A}}$ and $\ker{A}$, then $E,F \in \A$.
		\item If $A = W\abs{A}$ is teh polar decomposition, then $\abs{A},W \in \A$.
	\end{enumerate}
\end{prop}
\begin{proof}
	For $1)$, if $h \in \ker{A}$ and $B \in \A^{'}$, then $BAh = ABh = 0$. That means $F$ is invariant for $\{\A\}^{'}$ and thus $F \in \{\A\}^{''}$. And $E = \ker{\st{A}} \in \{\A\}^{''}$.
	\item For $2)$, $\abs{A}$ is clearly in $\A$ by the Continuous Functional Calculus. For $W$, we just need to prove that $WT=TW$ for any $T \in \A^{'}$. Let $E = \ker{\abs{A}}$ . By $1)$, $E \in \A = \A^{''}$. For $x \in \ker{\abs{A}} = E$, $ET=TE$ implies $Tx \in \ker{\abs{A}}$. Since $\ker{\abs{A}} = \ker{A}$, $WTx =0 = TWx$. On the other hand, if $x \in \ran{\abs{A}}$, $x = \abs{A}y$ for some $y \in \Hs$.
	\begin{equation*}
		WTx = WT\abs{A}y = W\abs{A}Ty = ATy= TAy = TW\abs{A}y = TWx
	\end{equation*} 
	And this equation can be easily extended to $\clo{\ran{\abs{A}}}$. $\Hs = \ker{\abs{A}} \oplus \clo{\ran{\abs{A}}}$, thus $TW=WT$.
\end{proof}

Before researching the structure of abelian von Neumann algebras, there is a typical example.
\begin{exam}
	If $(X,\Omega,\mu)$ is a finite measure space, and $\A_{\mu} = \{M_{\phi} \colon \phi \in \lfs{\infty}(\mu)\}$, then
	\begin{equation*}
		\A_{\mu} = \A_{\mu}^{'} = \A_{\mu}^{''}
	\end{equation*}
\end{exam}
\begin{proof}
	It suffices to show $\A_{\mu} = \A_{\mu}^{'}$. And since $\A_{\mu}$ is abelian, $\A_{\mu} \subset \A_{\mu}^{'}$. Consider $T \in \A_{\mu}^{'}$, then $\mu(X) < \infty$ implies that $1 \in \lfs{2}(\mu)$. Let $\phi = T(1) \in \lfs{2}(\mu)$. 
	\item Check: $T=M_{\phi}$ \\
	Firstly, if $\psi \in \lfs{\infty}(\mu)$, 
	\begin{equation*}
		T(\psi) = T(M_{\psi}1) = M_{\psi}T(1) = \phi\psi
	\end{equation*}
	And also,
	\begin{equation*}
		\norm{T(\psi)} = \norm{\phi\psi} \leqslant \norm{T}\norm{\psi}_2
	\end{equation*}
	Using this we can show $\phi \in \lfs{\infty}(\mu)$. Let 
	\begin{equation*}
		\Delta_n = \{~ x \in X \colon \abs{\phi(x)} \leqslant n ~\},~ \psi = \chi_{\Delta_n}
	\end{equation*}
	Then we have 
	\begin{equation*}
		\norm{T}^2\mu(\Delta_n) = \norm{T}^2 \norm{\psi}^2 \geqslant \norm{\phi}^2\norm{\psi}^2 = \int_{\Delta_n}\abs{\phi}^2 d\mu = n^2\mu(\Delta_n)
	\end{equation*}
	Thus $\mu(\Delta_n)=0$. $\phi \in \lfs{\infty}(\mu)$. And since $\lfs{\infty}(\mu)$ is dense in $\lfs{2}(\infty)$, $T=M_{\phi}$ can be defined on $\lfs{2}(\infty)$.
\end{proof}
\begin{rem}
	In fact, this result can be also true for $(X,\Omega,\mu)$ $\sigma$-finite.
\end{rem}

\begin{defn}
	Let $\mathcal{S} \subset \oper$ and $e_0 \in \Hs$.
	\begin{enumerate}[label=\arabic*)]
		\item $e_0$ is said to be star-cyclic for $\mathcal{S}$ if $\clo{\Cg{\mathcal{S}}e_0} = \Hs$.
		\item $e_0$ is said to be separating for $\mathcal{S}$ there is no nonzero $S \in \mathcal{S}$ s.t. $Se_0=0$.
	\end{enumerate}
\end{defn}

\begin{prop}
	If $\A$ is a unital $\st{C}$-algebra of operators, a vector is cyclic if and only if it is separating for $\A^{'}$
\end{prop}
\begin{proof}
	For $T \in \A^{'}$, s.t. $Te_0 = 0$. Then $T \A e_0 = \A T e_0 =  0$. If $e_0$ is the cyclic vector for $\A$, then $\A e_0$ is dense in $\Hs$. Therefore, $T=0$.\\
	Conversely, if $e_0$ separates $\A^{'}$, let $P$ be the projection onto $\clo{(\A e_0)}^{\bot}$. Then $P \in \A^{'}$ and $P e_0 = 0$. Therefore, $P = 0$. $e_0$ is cyclic for $\A$. 
\end{proof}
\begin{cor}
	If $\A$ is an abelian operator algebra, then each cyclic vector for $\A$ is also a separating vector for $\A$.
\end{cor}

\begin{defn}
	An abelian subalgebra $\A \subset \oper$ is said to be a maximal abelian subalgebra if there is no abelian subalgebra in $\oper$ containing $\A$. In particular, a maximal abelian von Neumann algebra is called a masa.
\end{defn}

\begin{thm}
	Let $\A$ be a subalgebra in $\oper$. Then the following statement are equivalent.
	\begin{enumerate}[label=\arabic*)]
		\item  $\A$ is a masa.
		\item $\A = \A^{'}$
	\end{enumerate}
\end{thm}
\begin{proof}
	Assume $\A$ is a masa. Then $\A \subset \A^{'}$. If there is a nonzero $A \in \A^{'} \backslash \A$, then $\C = \st{W}(\A,A)$ is an abelian von Neumann algebra containing $\A$, which is a contradiction. Thus $\A = \A^{'}$.\\
	Conversely, $\A$ is an abelian von Neumann algebra by above proposition. By Zorn's Lemma there is a maximal abelian von Neumann algebra $\B$ s.t. $\A \subset \B$. Then $\B^{'} \subset \A^{'}$. By above statement, $\B = \B^{'}$. Thus $\B \subset \A$.
\end{proof}

\begin{thm}
	If $\Hs$ is separable and $\A$ is an abelian $\st{C}$-algebra containing the identity, the following statements are equivalent.
	\begin{enumerate}[label=\arabic*)]
		\item $\A=\A^{'}$.
		\item $\A$ is strongly closed and has a cyclic vector.
		\item There is a compact metric space $X$, a regular Borel measure $\mu$ with support $X$, and a unitary $U \colon \lfs{2}(\mu) \sto \Hs$ s.t. $U\A_{\mu}U^{-1}=\A$.
	\end{enumerate}
\end{thm}
\begin{proof}
	$1) \Rightarrow 2)$ Let $\{e_n\}_{n=1}^{\infty}$ be a sequence of unit vectors s.t. 
	\begin{equation*}
		\clo{\A e_n} \bot \clo{\A e_m},\text{ for } n \neq m \text{ and } \Hs = \oplus_{n=1}^{\infty} \clo{\A e_n}
	\end{equation*}
	Set $e_0 = \sum_{n=1}^{\infty} 2^{-n} e_n$ and $P_n = \clo{\A e_n}$. Then $P_n \in \A^{'} = \A$. 
	\begin{equation*}
		e_n = 2^{n} P_n e_0 \in \clo{\A e_0} \Rightarrow \clo{\A e_n} \subset \clo{\A e_0}
	\end{equation*}
	Therefore, $\Hs = \clo{\A e_0}$.
	\item $2) \Rightarrow 3)$ Since $\Hs$ is separable, the unit ball in $\A$ is a $WOT$-closed  compact metric space, therefore there is a countable weakly dense set. Let $\A_1$ be the $\st{C}$-algebra generated by this set and $X$ be the maximal ideal space of $\A_1$. Clearly, $X$ is metrizable. Then the inverse of Gelfand transform
	\begin{equation*}
		\rho \colon C(X) \longrightarrow \A_1 \subset \A
	\end{equation*}
	And there is a spectral measure $E$, s.t. $\rho(f) = \int_{X} f dE$.
	Let $e_0$ be the cyclic vector of $\A$. Then we can define the $U$,
	\begin{center}
		\begin{tabular}{l c c l}
			$U \colon$ & $C(X)$ & $\longrightarrow$ & $\A_1 e_0$ \\
			~ & $\phi$ & $\longmapsto$ & $\rho(\phi)e_0$
		\end{tabular}
	\end{center}
	Let $\mu(\Delta) = \langle E(\Delta)e_0,e_0 \rangle$, then $C(X) \subset \lfs{2}(\mu)$ by the fact that $\mu$ is positive finite measure. For $\phi \in C(X)$,
	\begin{equation*}
		\norm{\rho(\phi)e_0}^2 = \langle \rho(\st{\phi})\rho(\phi)e_0,e_0 \rangle = \int \abs{\phi}^2 d \mu = \norm{\phi}^2
	\end{equation*}
	Therefore, $U$ is an isometry. Since $C(X)$ is norm dense in $\lfs{2}(\mu)$ and $\clo{\A_1 e_0} = \clo{\A e_0} = \Hs$, $U \colon \lfs{2}(\mu) \sto \Hs$ is a unitary. \\
	Let $\psi \in C(X)$ and $\phi \in C(X)$
	\begin{equation*}
		UM_{\psi}\phi = U(\psi\phi) = \rho(\psi\phi)e_0 = \rho(\psi) \rho(\phi)e_0 = \rho(\psi) U \phi  
	\end{equation*}
	Since $\rho(C(X)) = \A_1$, $\st{U} \A_1 U = \{M_{\phi} \colon \phi \in C(X)\}$.
	Define the map $\Gamma \colon \A \sto \A_{\mu}$ by $\Gamma(A) = \st{U} A U$. We have known that
	\begin{equation*}
		 \Gamma(\A_1) \subset \{M_{\phi} \colon \phi \in C(X)\} \subset \A_{\mu},
	\end{equation*}
	\begin{equation*}
		\clo{\{M_{\phi} \colon \phi \in C(X)\}}^{WOT} \subset \A_{\mu}
	\end{equation*}
	And $\Gamma$ is clearly $WOT$-closed, thus 
	\begin{equation*}
		\Gamma(\A) \subset \clo{\Gamma(\A_1)}^{WOT} \subset \A_{\mu}
	\end{equation*}
	$\Gamma$ is well-defined.
	In fact, by similar proof of $\A_{\mu}=\A_{\mu}^{'}$, ${\{M_{\phi} \colon \phi \in C(X)\}}^{'} = \A_{\mu}$, i.e. 
	\begin{equation*}
		\A_{\mu} = \clo{\{M_{\phi} \colon \phi \in C(X)\}}^{WOT}
	\end{equation*}
	Finally, it can easily check $\clo{\Gamma(\A_1)}^{WOT} \subset \Gamma(\A)$. Therefore, $\Gamma$ is an isomorphism.
	\item $3) \Rightarrow 1)$ It clearly holds by above example.
\end{proof}


This theorem gives an explicit structure of the maximal abelian von Neumann algebra, which is equivalent to $\lfs{\infty}(\mu)$. And for a general abelian von Neumann algebra, by Zorn's Lemma, it can embedded into a masa.

\begin{cor} \label{cor9}
	If $\Hs$ is separable, every abelian \Cs contained in $\oper$ has a separating vector.
\end{cor}
\begin{proof}
	By Zorn's Lemma, there is a masa containing the abelian \Cs and thus by above theorem it has a cyclic vector, which can separate the masa, in particular, this $\st{C}$-algebra.
\end{proof}

\subsection{Star-Cyclic Normal Operators}

In above subsection, we can see $\A_{\mu} = \{M_{\phi} \colon \phi \in \lfs{\infty}(\mu)\} \cong \lfs{\infty}(\mu)$ play an important role in the abelian von Neumann algebra. So we will see more properties of $\A_{\mu}$.

\begin{thm}[Fuglede-Putnam Theorem]
	Let $N$ and $M$ are normal operators and $A \in \oper$. If $NA = AM$, then $\st{N}A = A\st{M}$.
\end{thm}
\begin{proof}
	Since for any polynomial, $p(N)A=Ap(M)$, then for a fixed $\omega \in \C$, by taking limits
	\begin{equation*}
		e^{i\omega N}A = A e^{i\omega M}, \text{ or } A = e^{-i\omega N} A e^{i\omega M}
	\end{equation*}
	By the fact that $e^{X}e^{Y} = e^{X+Y}$ for commuting operators $X,Y$., therefore
	\begin{eqnarray*}
		f(\omega) &=& e^{-i\omega \st{N}} A e^{i\omega \st{M}} \\
		&=& e^{-i\omega \st{N}} e^{-i\clo{\omega} N} A e^{i\clo{\omega} M} e^{i\omega \st{M}} \\
		&=& e^{-i(\omega \st{N}+\clo{\omega} N)} A e^{i(\omega \st{M}+\clo{\omega} M)}
	\end{eqnarray*}
	Note that $f$ is a entire operator-valued function. Since $(\omega \st{N}+\clo{\omega} N)$ and $(\omega \st{M}+\clo{\omega} M)$ are self-adjoint, $e^{-i(\omega \st{N}+\clo{\omega} N)}$ and $e^{i(\omega \st{M}+\clo{\omega} M)}$ are unitaries. Then $f$ is bounded, thus $f$ is constant, i.e.
	\begin{equation*}
		0 = f^{'}(\omega) = -i\st{N}e^{-i\omega \st{N}} A e^{i\omega \st{M}} + ie^{-i\omega \st{N}} A \st{M} e^{i\omega \st{M}}
	\end{equation*}
	Let $\omega = 0$, then $0=-i\st{N}A + iA\st{M}$.
\end{proof}

\begin{cor}
	If $N$ is a normal operator with $N = \int z dE$, then $NA=AN$ if and only if $E(\Delta)N=NE(\Delta)$ for all Borel set $\Delta$.
\end{cor}

Then using this theorem we can find the generator of $\A_{\mu}$.
\begin{thm}
	If $\mu$ is any compactly supported measure on $\C$, then
	\begin{equation*}
		\{N_{\mu}\}^{'} = \A_{\mu}^{'}
	\end{equation*}
\end{thm}
\begin{proof}
	Clearly, $\A_{\mu}^{'} \subset N_{\mu}^{'}$. If $T \in N_{\mu}^{'}$, then $T\st{N_{\mu}} = \st{N_{\mu}}T$. Therefore, $T$ can commutes with any polynomials in $z$ and $\clo{z}$, and taking limits, $T \in \A_{\mu}^{'}$.
\end{proof}
\begin{rem}
	By this, we can also see the statement in above theorem
	\begin{equation*}
		{\{M_{\phi} \colon \phi \in C(X)\}}^{'} = \A_{\mu}
	\end{equation*}
	is true. Moreover, $\{N_{\mu}\}^{'} = \A_{\mu}^{'}$ implies that
	\begin{equation*}
		\st{W}(N_{\mu}) = \A_{\mu} \cong \lfs{\infty}(\mu)
	\end{equation*}
	Therefore, in order to research $\A_{\mu}$, we just research $N_{\mu}$.
\end{rem}

We have seen that if $\mu$ is finite then $N_{\mu}$ is indeed a cyclic normal operator on $\lfs{2}(\mu)$ as $\clo{\st{C}(\mu)1} = \lfs{2}(\mu)$ by the Stone-Weierstrass Theorem. Now, we can prove any cyclic normal operator is equivalent to a $N_{\mu}$ for some finite $\mu$.
\begin{thm}
	A normal operator $N$ is cyclic if and only if it is equivalent to $N_{\mu}$ for some compactly supported measure $\mu$ on $\C$. Moreover, if $e_0$ is the cyclic vector, then the unitary $U \colon \Hs \sto \lfs{2}(\mu)$ with $N_{\mu} = UN\st{U}$ can be chosen s.t. $Ue_0 = 1$.
\end{thm}
\begin{proof}
	If $E$ is the spectral measure s.t. $N = \int_{\sigma(N)} z dE$, for any Borel set $\Delta$ in $\sigma(N)$, then define
	\begin{equation*}
		\mu(\Delta) = \langle E(\Delta)e_0,e_0 \rangle = \norm{E(\Delta)e_0}^2
	\end{equation*}
	$\mu$ is finite, positive, and compactly supported on $\C$. Then $C(\sigma(N)) \subset \lfs{2}(\mu)$. We know that $\Cg{N} \cong C(\sigma(N))$. Define
	\begin{center}
		\begin{tabular}{l c c l}
			$U \colon$ & $\Cg{N}e_0$ & $\longrightarrow$ & $C(\sigma(N))$ \\
			~ & $\phi(N)e_0$ & $\longmapsto$ & $\phi$
		\end{tabular}
	\end{center}
	Then we have,
	\begin{equation*}
		\norm{\phi(N)e_0}^2 = \langle \phi(\st{N})\phi(N)e_0,e_0 \rangle = \int_{\sigma(N)} \abs{\phi}^2 d\mu = \norm{\phi}_2
	\end{equation*}
	$U$ is a unitary. By taking norm limits, $U \colon \Hs \sto \lfs{2}(\mu)$ is a unitary and $Ue_0 = 1$ and $UNe_0 = z$. If $\phi \in C(\sigma(N))$, then
	\begin{equation*}
		UN\st{U}(\phi) = UN\phi(N)e_0 = U(z\phi)(N)e_0 = z\phi = N_{\mu}(\phi)
	\end{equation*}
	Also, taking the norm limits, $UN\st{U}=N_{\mu}$.
\end{proof}

\begin{thm}
	Two normal operator $N_{\mu}$ and $N_{\nu}$ are equivalent if and only if $\mu$ and $\nu$ are mutually absolutely continuous.
\end{thm}
\begin{proof}
	If $\mu$ and $\nu$ are mutually absolutely continuous and $\phi = \frac{d\mu}{d\nu}$, then define
	\begin{center}
		\begin{tabular}{l c c l}
			$U \colon$ & $\lfs{2}(\mu)$ & $\longrightarrow$ & $\lfs{2}(\nu)$ \\
			~ & $f$ & $\longmapsto$ & $f\sqrt{\phi}$
		\end{tabular}
	\end{center}
	Then we have
	\begin{equation*}
		\norm{Uf}^2 = \int \abs{f}^2 \phi d\nu = \int \abs{f}^2 d \mu = \norm{f}^2
	\end{equation*}
	Thus $U$ is an isometry. Since $\frac{1}{\phi} = \frac{d\nu}{d \mu}$, the map $g \sto \sqrt{\frac{1}{\phi}}g$ is the inverse of $U$. Therefore, $U$ is unitary, and
	\begin{equation*}
		UN_{\mu}\st{U}g = UN_{\mu}(\sqrt{\frac{1}{\phi}}g) = U(z\sqrt{\frac{1}{\phi}}g) = zg = N_{\nu}g
	\end{equation*}
	Conversely, $N_{\mu} \cong N_{\nu}$ means $K=\sup{\mu} = \sigma(N_{\mu}) = \sigma(N_{\nu}) = \sup{N_{\nu}}$. Let $V \colon \lfs{2}(\mu) \sto \lfs{2}(\nu)$ be the unitary s.t. $VN_{\mu}\st{V}=N_{\nu}$. Then also $V\st{N_{\mu}}\st{V}=\st{N_{\nu}}$. Therefore, for any polynomial in $z$ and $\clo{z}$, let $V(1) = \psi$
	\begin{equation*}
		Vp(N_{\mu},\st{N_{\mu}})(1) = p(N_{\nu},\st{N_{\nu}})V(1)
	\end{equation*}
	That means
	\begin{equation*}
		\int_{K} \abs{p}^2 d\mu = \int_{K} \abs{p}^2 \abs{\psi}^2 d \nu
	\end{equation*}
	Taking limits, for any $f \in C(K)$, above identity is also true. Thus, $d \mu = \abs{\psi}^2 d \nu$, i.e. $\mu \ll \mu$. Similarly, by $V^{-1}$, we can get the converse.
\end{proof}

\section{The structure of \texorpdfstring{$W^{*}(N)$}{W*(N)}}

For a norm operator $N$, by above subsection, clearly
\begin{equation*}
	\{~M_{\phi} \colon \phi \in B~\} \subset \st{W}(N) = \{N\}^{'}
\end{equation*}
And we have seen, $\{N_{\mu}\}^{'} = \A_{\mu} \cong \lfs{\infty}(\mu)$. Firsty, we want to prove $\{M_{\phi} \colon \phi \in B\} = \st{W}(N)$. More, if we also can find some $\mu$ s.t. $\st{W}(N)=\st{W}(N_{\mu})$, then the structure of $\st{W}(N)$ is explicit, 
\begin{equation*}
	\st{W}(N) = \{~M_{\phi} \colon \phi \in B~\} \cong \lfs{\infty}(\mu)
\end{equation*}

Let $N$ be a normal operator acting on $\Hs$ with the spectral measure $E$. If $h \in \Hs$ is nonzero, then let 
\begin{equation*}
	\mu_h(\Delta) = E_{hh}(\Delta),~\Hs_h=\clo{\st{W}(N)h},~N_h = N|_{\Hs_h}
\end{equation*}
In fact, $\Hs_h$ is the smallest reducing space for $N$ containing $h$. And $N_h$ is a star-cyclic normal operator with the cyclic vector $h$. If $E_h$ is the spectral measure of $N_h$, then by the uniqueness of spectral measure
\begin{equation*}
	E_h(\Delta) = \chi_{\Delta}(N_h) = \chi_{\Delta}(N)|_{\Hs_h} = E(\Delta)|_{\Hs_h}
\end{equation*}
Therefore, there is a unique unitary $U_h \colon \Hs_h \sto \lfs{2}(\mu_h)$ s.t. $U_hh=1$ and $U_h N_h \st{U_h} = N_{\mu_h}$.

\begin{prop}
	Let $N$ be a normal operator acting on $\Hs$ and a nonzero $h \in \Hs$.
	\begin{center}
		\begin{tabular}{l c c l}
			$\rho_h \colon$ & $\st{W}(N)$ & $\longrightarrow$ & $\st{W}(N_h)$ \\
			~ & $A$ & $\longmapsto$ & $A|_{\Hs_h}$
		\end{tabular}
	\end{center}
	\begin{enumerate}[label=\arabic*)]
		\item $\rho_h$ is a $*$-homomorphism and $WOT$-continuous.
		\item If $\phi \in B(\sigma(N))$, then $\rho_h(\phi(N)) = \phi(N_h)$.
		\item If $h$ is separating for $\st{W}(N)$, then $\rho_h$ is injective.
		\item If $A \in \st{W}(N)$, then there exists a $\phi \in B(\sigma(N))$ s.t. $\rho_h(A) = \phi(N_h)$, and thus $\rho_h$ is surjective.
	\end{enumerate}
\end{prop}
\begin{proof}
	For $1)$, if $p(z,\clo{z})$ is any polynomial, then $\rho(p(N,\st{N})) = p(N_h,\st{N_h})$. For any $A \in \st{W}(N)$, there exists $p_n(N,\st{N})$ s.t. $p_n(N,\st{N}) \sto A$ in $WOT$. Then for any $g,h \in \Hs_h$
	\begin{equation*}
		\langle p_n(N,\st{N})g,h \rangle \sto \langle Ag,h \rangle
	\end{equation*}
	Therefore, $p_n(N_h,\st{N_h}) \sto A|_{\Hs_h}$ in $WOT$. And thus, $\rho_h$ is $WOT$-continuous and $\rho_h(A) \in \st{W}(N_h)$, well-defined. And clearly, $\rho_h$ is a $*$-homomorphism.

	\item For $2)$, if $\phi \in B(\sigma(N))$, then there exist polynomials $p_n(z,\clo{z})$ s.t. $p_n \sto \phi$ weakly in $M(\sigma(N))$ and $M(\sigma(N_h))$ as $\sigma(N_h) \subset \sigma(N)$. That means $p_n(N,\st{N}) \sto \phi(N)$ in $WOT$ and $p_n(N_h,\st{N_h}) \sto \phi(N_h)$. But $\rho_h(p_n(N,\st{N}) = p_n(N_h,\st{N_h})$ and $\rho$ is $WOT$-continuous, $\rho_h(\phi(N)) = \phi(N_h)$.

	\item For $3)$, if $h$ is separating for $\st{W}(N)$, $A_h = 0$ i.e $A\st{W}(N)h = 0$. That means $A\st{W}(N)=0$, then $A = 0$.

	\item For $4)$, if $A \in \st{W}(N)$ and $A_h = \rho_h(A)$, then $A_h \in \{N_h\}^{'} =\st{U_h}\{N_{\mu_h}\}^{'}U_h$. There is a $\psi \in \lfs{\infty}(\mu_h)$ s.t. $A_h = \st{U_h}M_{\psi} U_h$. Then there exist $\psi_n \in B(\sigma(N))$ s.t. $M_{\psi_n} \sto M_{\psi}$ in norm. Thus $\psi_n(N_h) \sto A_h$ in norm, there is a $\phi \in M(\sigma(N))$, s.t. $\phi(N_h) = A_h$. Moreover, this also implies $\rho_h$ is surjective.
\end{proof}
\begin{rem}
	The most important part in this proof is that for the $\mu_h$,
	\begin{equation*}
		\st{W}(N_{\mu_h}) = \A_{\mu_h} = \{~M_{\phi} \colon \phi \in \lfs{\infty}(\mu_h)~\} = \{~M_{\phi} \colon \phi \in B(\sigma(N_{\mu_h}))~\}
	\end{equation*}
\end{rem}

Using above proposition we get one of the main result of this subsection.
\begin{thm}
	If $N$ is a normal operator, then 
	\begin{equation*}
		\st{W}(N) = \{~\phi(N) \colon \phi \in B(\sigma(N))~\}
	\end{equation*}
\end{thm}
\begin{proof}
	It is sufficient to show that $\A = \{\phi(N) \colon \phi \in B(\sigma(N))\}$ is $WOT$-closed. Let $A \in \clo{\A}^{WOT} = \st{W}(N)$. Then there exists $\{\phi)n\} \subset B(\sigma(N))$ s.t. $\phi_n(N) \sto A$ in $WOT$. And for any $h \in \Hs$, there exists $\phi_h \in B(\sigma(N_h))$, s.t. $A_h = \phi_h(N_h)$, also $\phi_n(N_h) \sto A_h$ in $WOT$. That means 
	\begin{equation*}
		Ah = \phi_h(N_h)h = \phi_h(N)h,~~\forall~h \in \Hs
	\end{equation*}
	But $\phi_h$ is dependent with the chose of $h$. So we want to find a $e \in \Hs$ s.t. $\phi_h(N_h) = \phi_e(N_h)$ for any $h \in \Hs$. Fix a $e \in \Hs$ \\
	Check: $\phi_h(N_h)h = \phi_e(N_h)h$ \\
	By the definition, for any Borel subset $\Delta$ of $\sigma(N)$, since
	\begin{eqnarray*}
		\mu_e &=& \langle E(\Delta)e,e \rangle = \norm{E(\Delta)e}^2 \\
		\mu_h &=& \langle E(\Delta)h,h \rangle = \norm{E(\Delta)h}^2
	\end{eqnarray*}
	$mu_e$ and $\mu_h$ are mutually absolutely continuous. In fact, for any $g \in \Hs$, $\mu_h$ and $\mu_g$ are mutually absolutely continuous. Since $\phi_n(N_h) \sto A_h$ in $WOT$, $\phi_n \sto \phi_h$ weak$^{*}$ in $\lfs{\infty}(\mu_h)$. Also, $\phi_n \sto \phi_e$ weak$^{*}$ in $\lfs{\infty}(\mu_e)$. Then for any Borel subset $\Delta$
	\begin{equation*}
		\int_{\Delta} \phi_n d\mu_h = \int_{\Delta} \phi_n \frac{d\mu_h}{d\mu_e}d\mu_e \sto \int_{\Delta} \phi_e d\mu_h
	\end{equation*}
	and also $\int_{\Delta} \phi_n d\mu_h \sto \int_{\Delta} \phi d\mu_h$, therefore, $\phi_h = \phi_e$ a.e. with respect to $\mu_h$, in fact, it can be with respect to any $\mu_g$. Then for $g \in \Hs_h$,
	\begin{equation*}
		\langle \phi_h(N_h)g,g \rangle = \langle \phi_h(N)g,g \rangle = \int \phi_h d\mu_g = \int \phi_e d\mu_g = \langle \phi_e(N_h)g,g \rangle
	\end{equation*}
	Therefore, $\phi_h(N_h)h = \phi_e(N_h)h$. Then $A = \phi_e(N)$.
\end{proof} 

And also, by above proposition, the second result can also be proved.

\begin{thm}
	If $N$ is a normal operator on a separable Hilbert space, then there is a compactly supported, positive and finite measure $\mu$, s.t. there is a map $\rho \colon \lfs{\infty} \sto \st{W}(N)$, s.t.
	\begin{enumerate}[label=\arabic*)]
		\item $\rho$ is an isometrical $*$-isomorphism.
		\item $\rho \colon (\lfs{\infty}(\mu), \text{weak}^{*}) \sto (\st{W}(N), WOT)$ is a homeomorphism.
	\end{enumerate}
\end{thm}
\begin{proof}
	Since $\st{W}(N)$ is an abelian von Neumann algebra, it has a separating vector $e$ by the \textbf{Corollary} \ref{cor9} in the subsection \textbf{3.2.2}. Then let $\rho^{'} = \rho_e$ and $\mu = \mu_e$. By above proposition, $\rho^{'}$ is a $*$-isomorphism from $\st{W}(N_e)$ to $\st{W}(N)$. And since $\st{W}(N_e)$ is also $*$-isomorphic to $\lfs{\infty}(\mu)$. Thus there is a $*$-isomorphism $\rho$ from $\lfs{\infty}(\mu)$ to $\st{W}(N)$ s.t. for any $\phi \in B(\sigma(N))$, $\rho(\phi) = \phi(N)$. And thus $\rho$ is isometrical.\\
	For $2)$, since $\st{W}(N) = \{\phi(N) \colon \phi \in B(\sigma(N))\}$, if $\phi_n(N) \sto \phi(N)$ in $WOT$, then we can easily know $\phi_n \sto \phi$ in weak$^{*}$. And the converse is trivial. $\rho$ is weak$^{*}$-$WOT$ homeomorphism.
\end{proof}

Now, we can see the structure of any abelian von Neumann algebra on a separable Hilbert space.
\begin{thm} \label{thm13}
	If $\A$ is an abelian von Neumann algebra on a separable Hilbert space $\Hs$, then there is a compactly supported, positive and finite measure $\mu$ s.t. $\A \cong \lfs{\infty}(\mu)$, $*$-isomorphism.
\end{thm}
\begin{proof}
	Since $\Hs$ is separable, the closed unit ball in $\A$ is $WOT$-compactly metrizable, thus there is a countable $WOT$-dense set of $\A$. Since $\A$ can be generated by projections in $\A$, thus this $WOT$-dense set can be chosen as a set of projections $\{P_n\}$. Let $\alg{C} = \Cg{\{P_n\}}$, then $\alg{C}$ is ablelian. Thus there is a compact space $X$, which is totally disconnected, s.t. $\alg{C} \cong C(X)$. And let $\rho \colon C(X) \sto \alg{C}$ be the inverse of Gelfand Transform. Then $p_n = \rho^{-1}(P_n)$ is the characteristic function and continuous. Define
	\begin{equation*}
		f = \sum_{n=1}^{\infty} 3^{-n}(2p_n - 1)
	\end{equation*}
	Claim: $\Cg{f} = C(X)$ \\
	By the Stone-Weierstrass Theorem, we just need to show that $f$ can separate the points of $X$. Since $\{p_n\}$ generates $C(X)$, $\{p_n\}$ can separate the points in $X$. Thus, for $x \neq y \in X$, there is a $p_k$, s.t. $p_k(x) \neq p_k(y)$ and chosing the $k$ be the smallest one satisfying this condition, then
	\begin{eqnarray*}
		\abs{f(x)-f(y)} &=& 2 \abs{\sum_{n=k}^{\infty} 3^{-n}(p_n(x) - p_n(y))} \\
		&\geqslant& 2 3^{-k} - 2 \sum_{n=k+1}^{\infty} 3^{-n} \\
		= 3^{-k}
	\end{eqnarray*}
	Therefore, let $A = \rho(f) = \sum_{n=1}^{\infty} 3^{-n}(2P_n - 1)$, $\Cg{A} = \alg{C}$. Moreover, $\st{W}(A) = \clo{\Cg{A}}^{WOT} = \A$. And since $A$ is self-adjoint, thus by above theorem, there exists $\mu$ on $\sigma(A)$, s.t.
	\begin{equation*}
		\A \cong \lfs{\infty}(\mu) \qedhere
	\end{equation*}
\end{proof}

\section{Multiplicity Theory}

Finally, we want find the necessary and sufficient condition making two normal operators be equivalent. We should assume the Hilbert space is always separable.

\begin{prop}
	If $N$ is a normal operator on $\Hs$ and $e \in \Hs$, then there is a separating vector $e_0$ for $\st{W}(N)$ s.t. $e \in \clo{\st{W}(N)}$.
\end{prop}
\begin{proof}
	Choosing any separating operator $f_0$ for $\clo{\st{W}(N)}$, let $\M = \clo{\st{W}(N)}f_0$, then $e = m_0 + g_0$ for $m_0 \in \M$ and $g_0 \in \M^{\bot}$. Now, let $\fml{G} = \clo{\st{W}(N)g_0}$ and $e_0 = f_0 +g_0$. Then $e \in \clo{\st{W}(N)e_0}$.\\
	Check: $e_0$ is separating for $\st{W}(N)$\\
	For any $A \in \st{W}(N)$, since both $\M$ and $\fml{G}$ reduce $\st{W}(N)$, if
	\begin{equation*}
		Ae_0 = Af_0 + Ag_0 = 0
	\end{equation*}
	then $Af_0=0$. Because $f_0$ is separating for $\st{W}(N)$, $A = 0$.
\end{proof}

\begin{prop}
	Let $\mu$ be a compactly supported measure on $\C$ and $\Delta$ be a Borel subset of $\sup{\mu}$ and $\nu = \mu|_{\Delta}$. If $N = N_{\mu} \oplus N_{\nu}$ on $\lfs{2}(\mu) \oplus \lfs{2}(\nu)$ and $g\oplus h \in \lfs{2}(\mu) \oplus \lfs{2}(\nu)$ with $h \neq 0$ a.e. $\nu$, then there is a $f \in \lfs{2}(\mu)$ s.t. $f \oplus h$ is a separating vector for $\st{W}(N)$ and $g\oplus h \in \clo{\st{W}(N)(f \oplus h)}$.
\end{prop}
\begin{proof}
	Let $f(z) = g(z)$ for $z \in \Delta$ and $f(z) = 1$ for $x \in \Delta^{'}$ where $\Delta^{'} = \sup{\mu} \backslash \Delta$. In fact,
	\begin{equation*}
		\Hs = \clo{\st{W}(N)(f \oplus h)} = \clo{\{~\phi f \oplus \phi h \colon \phi \in \lfs{\infty}(\mu)~\}}
	\end{equation*}
	Since $\phi \chi_{\Delta^{'}} \oplus 0 = \phi \chi_{\Delta^{'}}(f \oplus h)$,
	\begin{equation*}
		g \oplus h = f \oplus h - (1-g)\chi_{\Delta^{'}} \oplus 0 \in \Hs
	\end{equation*}
	If $\phi \in \lfs{\infty}(\mu)$ with $\phi f \oplus \phi h = 0$, then $\phi f = \phi h = 0$ a.e. $\mu$ and $\nu$ respectively. By definition, $\phi = 0$ a.e. $\mu$.
\end{proof}

Then we can decompose normal operators as a "decreasing" sequence of cyclic operators.

\begin{thm} \label{thm10}
	If $N$ is a normal operator, then there is a sequence of measures $\{\mu_n\}$ on $\C$ s.t. $\mu_{n+1} \ll \mu_{n}$ for all $n$ and 
	\begin{equation*}
		N \cong N_{\mu_1} \oplus N_{\mu_2} \oplus N_{\mu_3} \oplus \cdots
	\end{equation*}
\end{thm}
\begin{proof}
	Let $e_1$ be a separating vector for $\st{W}(N)$ and $\{f_n\}$ be the orthonormal basis of $\Hs$ s.t. $f_1 = e_1$. Put
	\begin{equation*}
		\Hs_1 = \clo{\st{W}(N)e_1},~~\mu_1(\Delta) = \norm{E(\Delta)e_1}^2,~~ N_2 = N|_{\Hs_1}
	\end{equation*}
	Then for $f_2^{'} = $ the projection of $f_2$ to $\Hs_1^{\bot}$, there is a separating vector $e_2$ for $\st{W}(N_2)$ s.t. 
	\begin{equation*}
		f_2^{'} \in \Hs_2 = \clo{\st{W}(N_2)e_2}
	\end{equation*} 
	And clearly, if $\mu_2{\Delta} = \norm{E(\Delta)|_{\Hs_2}e_2}$, $\mu_2 \ll \mu_1$. By induction and the Zorn's Lemma, 
	\begin{equation*}
		N \cong N_{\mu_1} \oplus N_{\mu_2} \oplus N_{\mu_3} \oplus \cdots \qedhere
	\end{equation*}
\end{proof}

Therefore, if there is another normal operator $M \cong N_{\nu_1} \oplus N_{\nu_2} \oplus \cdots$, we want to find the relation between the equivalence of $N$ and $M$ and the equivalence of the coincided $\mu_n$ and $\nu_n$. But before that we need some lemmas.

\begin{prop}
	If $N_1$ and $N_2$ are normal operators on $\Hs_1$ and $\Hs_2$ respectively and $X \colon \Hs_1 \sto \Hs_2$ s.t. $XN_1 = N_2X$, then 
	\begin{enumerate}[label=\arabic*)]
		\item $\clo{\ran{X}}$ reduces $N_2$.
		\item $\ker{X}$ reduces $N_1$.
		\item If $M_1 = N_1|_{(\ker{X})^{\bot}}$ and $M_2 = N_2|_{\clo{\ran{X}}}$, then $M_1 \cong M_2$.
	\end{enumerate}
\end{prop}
\begin{proof}
	For $1)$, if $f_1 \in \Hs_1$, $XN_1f_1 = N_2Xf_1 \in \ran{X}$. Therefore, $\clo{\ran{X}}$ is invariant $N_2$. And also, by the Fuglede-Putnam Theorem, $X\st{N_1} = \st{N_2}X$, thus $\clo{\ran{X}}$ is invariant $\st{N_2}$.\\
	$2)$ is similar as $1)$.
	For $3)$, it is sufficent to show this when $\ker{X}=\{0\}$ and $\ran{X}$ is dense. By the Polar Decomposition, $X=UA$ for some unitary $U$. Since $\st{X}\st{N_2} = \st{N_1}\st{X}$, $\st{X}N_2 = N_1\st{X}$. Therefore $A^2 \in \{N_1\}^{'}$, so $A \in \{N_1\}^{'}$ by the functional calculus.
	\begin{equation*}
		N_2X = N_2UA= XN_1 = UAN_1 = UN_1A
	\end{equation*}
	That means $N_2U=UN_1$ on $\clo{\ran{A}} = \clo{\ran{X}} = \Hs_1$, therefore $N_1 \cong N_2$.
\end{proof}

\begin{prop}
	If $N,A$ and $B$ are normal operators on $\fml{K}$, $\Hs_A$ and $\Hs_B$ respectively and $N$ is $*$-cyclic and 
	\begin{equation*}
		N \oplus A \cong N \oplus B
	\end{equation*}
	then $A \cong B$.
\end{prop}
\begin{proof}
	Let $U \colon \fml{K} \oplus \Hs_A \sto \fml{K} \oplus \Hs_B$, and $U$ can be
	\begin{equation*}
		U = \left(
			\begin{array}{cc}
				U_{11} & U_{12} \\
				U_{21} & U_{22}
			\end{array}
		\right)
	\end{equation*}
	Then we have
	\begin{eqnarray*}
		\left(
			\begin{array}{cc}
				U_{11}N & U_{12}A \\
				U_{21}N & U_{22}A
			\end{array}
		\right)
		&=& \left(
			\begin{array}{cc}
				NU_{11} & NU_{12} \\
				BU_{21} & BU_{22}
			\end{array}
		\right) \\
		\left(
			\begin{array}{cc}
				U_{11}\st{N} & U_{12}\st{A} \\
				U_{21}\st{N} & U_{22}\st{N}
			\end{array}
		\right)
		&=&\left(
			\begin{array}{cc}
				\st{N}U_{11} & \st{N}U_{12} \\
				\st{B}U_{21} & \st{B}U_{22}
			\end{array}
		\right)
	\end{eqnarray*}
	Then by above proposition, 
	\begin{equation*}
		A|_{(\ker{U_{22}})^{\bot}} = B|_{(\ker{\st{U_{22}}})^{\bot}}
	\end{equation*}
	For $\ker{U_{22}}$ and $\ker{\st{U_{22}}}$, put $\M_1 = U_{12}(\ker{U_{22}})$, $\M_2= \st{U_{21}}(\ker{\st{U_{22}}})$, also by the identity, $\st{U}U = U\st{U} = 1$, 
	\begin{equation*}
		A|_{\ker{U_{22}}} \cong N|_{\M_1},~~B|_{\ker{\st{U_{22}}}} \cong N|_{\M_2}
	\end{equation*}
	And then it easily check that $\M_1 = \M_2$.
\end{proof}

\begin{thm}
	For two normal operators $N$ and $M$ and the two sequences of measures $\{\mu_n\}$ and $\{\nu_n\}$ on $\C$ s.t. $\mu_{n+1} \ll \mu_{n}$ and $\nu_{n+1} \ll \nu_{n}$ for all $n$ s.t.
	\begin{eqnarray*}
		N &\cong& N_{\mu_1} \oplus N_{\mu_2} \oplus \cdots \\
		M &\cong& N_{\nu_1} \oplus N_{\nu_2} \oplus \cdots
	\end{eqnarray*}
	then $N \cong M$ if and only if $\mu_n$ and $\nu_n$ are mutually absolutely continuous for all $n$.
\end{thm}
\begin{proof}
	Let $N \cong M$ with the unitary $U$. If $e_1$ is the separating vector for $\st{W}(N)$, then $f_1 = Ue_1$ is the separating vector for $\st{W}(M)$. If the $\mu_1$ and $\nu_1$ are the coincided measures, then $\mu_1$ and $\nu_1$ are mutually absolutely continuous, thus $N_{\mu_1} \cong N_{\nu_1}$. Let $\Hs_1 = \clo{\st{W}(N)e_1}$ and $\Hs_1^{'} = \clo{\st{W}(M)e_1}$. Then by above theorem,
	\begin{equation*}
		N = N_{\mu_1} \oplus N|_{\Hs_1^{\bot}} \cong M = N_{\nu_1} \oplus M|_{\Hs_1^{'\bot}}
	\end{equation*}
	we know that $N|_{\Hs_1^{\bot}} \cong M|_{\Hs_1^{'\bot}}$. Therefore, by induction, we can get the result.
\end{proof}

Then we can get another formula of above theorem to help us build the Multiplicity Theorem.
\begin{cor}
 	If $N$ is a normal operator with the coincided measure $\mu$, then there is a decreasing sequence $\{\Delta_n\}$ of Borel subsets of $\sigma(N)$ s.t. $\Delta_1 = \sigma(N)$ and 
 	\begin{equation*}
 		N \cong N_{\mu} \oplus N_{\mu|_{\Delta_2}} \oplus N_{\mu|_{\Delta_3}} \oplus \cdots
 	\end{equation*}
 	Also, if $M$ is another normal operator with similar formula
 	\begin{equation*}
 		M \cong N_{\nu} \oplus N_{\nu|_{\Sigma_2}} \oplus N_{\nu|_{\Sigma_3}} \oplus \cdots
 	\end{equation*}
 	then $N \cong M$ if and only if $\mu$ and $\nu$ are mutually absolutely continuous and $\mu(\Delta_n \backslash \Sigma_n) = 0 = \mu(\Sigma_n \backslash \Delta_n)$
\end{cor}

\begin{thm} \label{thm9}
	If $N$ is a normal operator, then there are mutually singular measures $\mu_{\infty}, \mu_1, \mu_2, \cdots$ s.t.
	\begin{equation*}
		N \cong N_{\infty}^{(\infty)} \oplus N_{\mu_1} \oplus N_{\mu_2}^{(2)} \oplus  N_{\mu_3}^{(3)} \oplus \cdots
	\end{equation*}
	If $M$ is another normal operator with the corresponding  measures $\nu_{\infty}, \nu_1, \cdots$, then $N \cong M$ if and only if $\mu_n$ and $\nu_n$ are mutually absolutely continuous for $1 \leqslant n \leqslant \infty$.
\end{thm}
\begin{proof}
	Let the $\mu$ and $\{\Delta_n\}$ be the sequence in above corollary. Put
	\begin{equation*}
		\Sigma_{\infty} = \bigcap_{n=1}^{\infty} \Delta_n \text{, } \Sigma_n = \Delta_n \backslash \Delta_{n+1} \text{ and } \mu_n = \mu|_{\Sigma_n}
	\end{equation*}
	for $1 \leqslant n \leqslant \infty$ and $\nu_n = \mu|_{\Delta_n}$ for $1 \leqslant n < \infty$. Now, 
	\begin{equation*}
		\Delta_n = \Sigma_{\infty} \bigcup (\Delta_n \backslash \Delta_{n+1}) \bigcup (\Delta_{n+1} \backslash \Delta_{n+2}) \bigcup (\Delta_{n+2} \backslash \Delta_{n+3}) \bigcup \cdots
	\end{equation*}
	Therefore, $\nu_n = \mu_{\infty} + \mu_n + \mu_{n+1} + \mu_{n+2} + \cdots$ and $\{\mu_n\}$ are pairwise singular.
	Thus,
	\begin{equation*}
		N_{\nu_n} = N_{\mu_{\infty}} \oplus N_{\mu_n} \oplus N_{\mu_{n+1}} \oplus \cdots
	\end{equation*}
	Then we have
	\begin{eqnarray*}
		N &=& N_{\nu_1} \oplus N_{\nu_2} \oplus \cdots \\
		&=& N_{\infty}^{(\infty)} \oplus N_{\mu_1} \oplus N_{\mu_2}^{(2)} \oplus  N_{\mu_3}^{(3)} \oplus \cdots
	\end{eqnarray*}
\end{proof}

Now, we can define the multiplicity function $m_N$ for a normal operator $N$ with the corresponding measure $\mu$. As above preceding theorem, 
\begin{equation*}
	N \cong N_{\infty}^{(\infty)} \oplus N_{\mu_1} \oplus N_{\mu_2}^{(2)} \oplus  N_{\mu_3}^{(3)} \oplus \cdots
\end{equation*}
If there are disjoint Borel sets $\Delta_{\infty},\Delta_1,\Delta_2,\cdots$ of $\C$ s.t. $\mu_n$ and $\mu|_{\Delta_n}$ are mutually absolutely continuous for all $n$, then define
$m_N \colon \C \sto \N \cup \{\infty\}$ as
\begin{equation*}
	m_N = \infty \chi_{\Delta_{\infty}} + \chi_{\Delta_1} + 2\chi_{\Delta_2} + 3\chi_{\Delta_3} + \cdots
\end{equation*}
Clearly, $m_N$ is dependent with the choice of $\{\Delta_n\}$, but by the definition, $m_N$ can be identified as an equivalent class with respect to $\mu$. And moreover,
\begin{equation*}
	\Delta_n = \{~z \colon m_N(z) = n~\}
\end{equation*}

Therefore, we can recover the $\{\Delta_n\}$ by the $m_N$. By combining with above theorem, we can classify the normal operators.

\begin{thm}
	Two normal operators are equivalent if and only if they have same multiplicity function.
\end{thm}
